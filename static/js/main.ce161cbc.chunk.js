(this["webpackJsonpreact-quick-draw"]=this["webpackJsonpreact-quick-draw"]||[]).push([[0],{123:function(e,t,n){e.exports=n(235)},133:function(e,t){},135:function(e,t){},146:function(e,t){},148:function(e,t){},173:function(e,t){},175:function(e,t){},176:function(e,t){},182:function(e,t){},184:function(e,t){},202:function(e,t){},205:function(e,t){},221:function(e,t){},224:function(e,t){},230:function(e){e.exports=JSON.parse('["bird","book","car","cat","chair","flower","plane","sheep","ship","strawberry"]')},235:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(115),c=n.n(o);n(128),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=n(14),i=n(34),l=n(60),s=n.n(l),d=n(116);function f(e,t){var n,a=(n=e,i.b.fromPixels(n.current).resizeNearestNeighbor([28,28]).mean(2).expandDims(2).expandDims().toFloat().div(255));return t.then((function(e){return e.predict(a).data()})).then(function(){var e=Object(d.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a(t).data();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}var m=function(e){var t=e.buttonText,n=e.onClickFunction,a=e.buttonId,o=e.type,c=void 0===o?"":o;return r.a.createElement("button",{type:"button",id:a,className:"nes-btn".concat(" ",c),onClick:n},t)},h=r.a.forwardRef((function(){var e=Object(a.useContext)(b),t=e.startRound,n=e.startExtraTime,o=e.seconds,c=Object(a.useContext)(N),i=c.ref,l=c.model,s=c.labels,d=c.dispatch,h=c.currentRound,p=c.nextRound,v=Object(a.useState)(""),E=Object(u.a)(v,2),g=E[0],y=E[1];function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"addOne";f(i,l).then((function(t){y(s[t[0]]),s[t[0]]===s[h]&&d({type:e})})),p(),t()}return Object(a.useEffect)((function(){console.log(g)})),r.a.createElement("div",null,o>0?r.a.createElement("div",null,r.a.createElement(m,{buttonText:"Clear the canvas.",onClickFunction:function(){var e=i.current;e.getContext("2d").fillRect(0,0,e.height,e.width)},buttonId:"clearCanvas",type:"is-warning"}),r.a.createElement(m,{buttonText:"Submit early for an extra Point",onClickFunction:function(){return w("addTwo")},buttonId:"predictEarly"}),r.a.createElement(m,{buttonText:"+10s at cost of 1 Point",onClickFunction:function(){n(),d({type:"minusOne"})},buttonId:"extraTime"})):w())})),b=r.a.createContext({});function p(){var e=function(){var e=Object(a.useState)(20),t=Object(u.a)(e,2),n=t[0],r=t[1];return[setInterval((function(){0===n?clearInterval():r(n-1)}),1e3),n,function(){return r(20)},function(){return r(n+10)}]}(),t=Object(u.a)(e,4),n=t[0],o=t[1],c=t[2],i=t[3],l=Object(a.useContext)(N),s=l.labels,d=l.currentRound,f=l.points;return Object(a.useEffect)((function(){return function(){return clearInterval(n)}})),r.a.createElement("div",null,r.a.createElement(b.Provider,{value:{seconds:o,startRound:c,startExtraTime:i}},r.a.createElement(h,null),r.a.createElement("div",{className:"nes-text"},"You have ",o," seconds to draw a ",s[d],"!"),r.a.createElement("div",{className:"nes-text"},"You've scored ",f," Points so far.")))}function v(e,t){switch(t.type){case"reset":return 0;case"addOne":return e+1;case"addTwo":return e+2;case"minusOne":return e-1;default:return e}}var E=function(e){var t=e.children,n=e.title,a=void 0===n?"":n,o="nes-container".concat(" ","is-dark"," ","is-rounded"," ",a?"with-title":"");return r.a.createElement("div",{className:o},a?r.a.createElement("p",{className:"title"},a):null,t)},g=r.a.forwardRef((function(){var e,t,n=Object(a.useContext)(b).ref,o=!1;return Object(a.useEffect)((function(){var e=n.current,t=e.getContext("2d");t.fillStyle="#ffffff",t.fillRect(0,0,e.height,e.width)})),r.a.createElement("canvas",{height:300,width:300,ref:n,onMouseDown:function(){return o=!0},onMouseUp:function(){o=!1,e=void 0,t=void 0},onMouseMove:function(n){return function(n){var a=n.target.getBoundingClientRect(),r=n.clientX-a.left,c=n.clientY-a.top;if(o){var i=function(e,t,n,a,r){var o=e.getContext("2d");return o.strokeStyle="#000000",o.lineWidth=12,o.lineJoin="round",o.beginPath(),o.moveTo(a,r),o.lineTo(t,n),o.closePath(),o.stroke(),[t,n]}(n.target,r,c,e,t),l=Object(u.a)(i,2);e=l[0],t=l[1]}}(n)}})})),y=n(42),w=n(5),x=n(117),k=n(118),O=n(122),j=n(121),C=n(119),T=n.n(C),R=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"componentDidMount",value:function(){var e={strings:this.props.strings,typeSpeed:50,backSpeed:50};this.typed=new T.a(this.typedText,e)}},{key:"componentWillUnmount",value:function(){this.typed.destroy()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"wrap"},r.a.createElement("span",{style:{whiteSpace:"pre"},ref:function(t){e.typedText=t}}))}}]),n}(r.a.Component),S=i.c("/react-quick-draw/model/model.json"),I=n(230),P=r.a.createRef(),N=r.a.createContext({});function F(){var e=function(e){var t=Object(a.useState)(0),n=Object(u.a)(t,2),o=n[0],c=n[1];return[Array.apply(null,{length:e.length}).map((function(e,t){return r.a.createElement(p,null)})),o,function(){return c(o+1)},function(){return c(0)}]}(I),t=Object(u.a)(e,4),n=t[0],o=t[1],c=t[2],i=t[3],l=Object(a.useReducer)(v,0),s=Object(u.a)(l,2),d=s[0],f=s[1],h="Sketch! - Round "+(o+1)+" of "+n.length,w=r.a.createElement(E,{title:h},r.a.createElement(b.Provider,{value:{ref:P,model:S,labels:I}},r.a.createElement(g,null),n[o],r.a.createElement("br",null),r.a.createElement(y.b,{to:"/"},r.a.createElement(m,{buttonText:"Home",onClickFunction:function(){return i()},buttonId:"home"})))),x=r.a.createElement(E,{title:"Sketch!"},r.a.createElement("h2",null,"You scored ",d," points!"),r.a.createElement("br",null),r.a.createElement(R,{strings:["Want to challenge your drawing skills again?","Lets try again!"]}),r.a.createElement(m,{buttonText:"Try Again!",onClickFunction:function(){i(),f({type:"reset"})},type:"is-primary"}));return r.a.createElement(N.Provider,{value:{points:d,dispatch:f,rounds:n,currentRound:o,nextRound:c,resetRounds:i,ref:P,model:S,labels:I}},o>9?x:w)}function D(){return r.a.createElement(E,{title:"Sketch!"},r.a.createElement(R,{strings:['This game has been modeled-off Google\'s "Quick, Draw!" game, and uses a sampling from the "Quick, Draw!" dataset.<br/>Brought to you by the EPFL Extension School.']}),r.a.createElement("br",null),r.a.createElement(y.b,{to:"/game"},r.a.createElement(m,{buttonText:"Lets start!",buttonId:"gameScreen"})))}var M=function(){return r.a.createElement(y.a,{basename:"/react-quick-draw/"},r.a.createElement(w.c,null,r.a.createElement(w.a,{path:"/game"},r.a.createElement(F,null)),r.a.createElement(w.a,{path:"/"},r.a.createElement(D,null))))};c.a.render(r.a.createElement("div",null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[123,1,2]]]);
//# sourceMappingURL=main.ce161cbc.chunk.js.map